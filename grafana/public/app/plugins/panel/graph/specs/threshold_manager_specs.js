/*! grafana - v4.0.2-1481203731 - 2016-12-08
 * Copyright (c) 2016 Torkel Ã–degaard; Licensed Apache-2.0 */

System.register(["../../../../../test/lib/common","../threshold_manager"],function(a){var b,c;return{setters:[function(a){b=a},function(a){c=a}],execute:function(){b.describe("ThresholdManager",function(){function a(a,d){b.describe(a,function(){var a={panel:{thresholds:[]},options:{grid:{markings:[]}},panelCtrl:{}};a.setup=function(b){a.panel.thresholds=b;var d=new c.ThresholdManager(a.panelCtrl);d.addPlotOptions(a.options,a.panel)},d(a)})}b.describe("When creating plot markings",function(){a("for simple gt threshold",function(a){a.setup([{op:"gt",value:300,fill:!0,line:!0,colorMode:"critical"}]),b.it("should add fill for threshold with fill: true",function(){var c=a.options.grid.markings;b.expect(c[0].yaxis.from).to.be(300),b.expect(c[0].yaxis.to).to.be(1/0),b.expect(c[0].color).to.be("rgba(234, 112, 112, 0.12)")}),b.it("should add line",function(){var c=a.options.grid.markings;b.expect(c[1].yaxis.from).to.be(300),b.expect(c[1].yaxis.to).to.be(300),b.expect(c[1].color).to.be("rgba(237, 46, 24, 0.60)")})}),a("for two gt thresholds",function(a){a.setup([{op:"gt",value:200,fill:!0,colorMode:"warning"},{op:"gt",value:300,fill:!0,colorMode:"critical"}]),b.it("should add fill for first thresholds to next threshold",function(){var c=a.options.grid.markings;b.expect(c[0].yaxis.from).to.be(200),b.expect(c[0].yaxis.to).to.be(300)}),b.it("should add fill for last thresholds to infinity",function(){var c=a.options.grid.markings;b.expect(c[1].yaxis.from).to.be(300),b.expect(c[1].yaxis.to).to.be(1/0)})}),a("for lt then gt threshold (inside)",function(a){a.setup([{op:"lt",value:300,fill:!0,colorMode:"critical"},{op:"gt",value:200,fill:!0,colorMode:"critical"}]),b.it("should add fill for first thresholds to next threshold",function(){var c=a.options.grid.markings;b.expect(c[0].yaxis.from).to.be(300),b.expect(c[0].yaxis.to).to.be(200)}),b.it("should add fill for last thresholds to itself",function(){var c=a.options.grid.markings;b.expect(c[1].yaxis.from).to.be(200),b.expect(c[1].yaxis.to).to.be(200)})}),a("for gt then lt threshold (outside)",function(a){a.setup([{op:"gt",value:300,fill:!0,colorMode:"critical"},{op:"lt",value:200,fill:!0,colorMode:"critical"}]),b.it("should add fill for first thresholds to next threshold",function(){var c=a.options.grid.markings;b.expect(c[0].yaxis.from).to.be(300),b.expect(c[0].yaxis.to).to.be(1/0)}),b.it("should add fill for last thresholds to itself",function(){var c=a.options.grid.markings;b.expect(c[1].yaxis.from).to.be(200),b.expect(c[1].yaxis.to).to.be(-(1/0))})})})})}}});